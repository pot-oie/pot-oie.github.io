---
import { Image } from "astro:assets"; // 使用 Astro 100% 优化的 <Image> 组件
import { format } from "date-fns"; // 格式化日期

// 我们期望从父组件（比如首页）那里接收一个 'post' 对象
// 这个 'post' 对象是 Astro 从 'src/content/blog/' 中查询到的
export interface Props {
  post: any; // 我们先用 'any'，后面再优化
}
const { post } = Astro.props;

// 格式化日期，例如 "Nov 14, 2025"
const formattedDate = format(new Date(post.data.pubDate), "MMM dd, yyyy");
---

<a 
  href={`/blog/${post.slug}/`}
  class="group block rounded-lg overflow-hidden shadow-md bg-white dark:bg-zinc-800 transition-all duration-300 hover:shadow-xl dark:hover:shadow-zinc-700/50"
>
  {post.data.image && (
    <Image
      src={post.data.image}
      alt={post.data.title}
      width={1200}
      height={630}
      format="webp"
      class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"
    />
  )}
  
  <div class="p-6">
    
    <p class="text-sm text-zinc-500 dark:text-zinc-400 mb-2">
      {formattedDate}
    </p>

    <h3 class="text-2xl font-bold mb-3 text-zinc-900 dark:text-zinc-100 group-hover:text-primary-500 transition-colors">
      {post.data.title}
    </h3>

    <p class="text-zinc-700 dark:text-zinc-300 line-clamp-3">
      {post.data.description || "这篇文章没有摘要..."}
    </p>

  </div>
</a>